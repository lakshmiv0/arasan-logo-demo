<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ARASAN Logo Showcase (Embedded)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Cinzel:wght@400;500;600;700&family=Bodoni+Moda:opsz,wght@6..96,400;6..96,500;6..96,600;6..96,700&family=Jost:wght@400;500;600;700&family=Manrope:wght@400;500;600;700&family=Cormorant+Garamond:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #FAF6E5;
      --panel-bg:#ffffff;
      --panel-border: #ddd;
      --text:#222;
      --text-soft:#555;
      --accent:#2c4d7f;
      --accent-alt:#1c324e;
      --focus:#0066cc;
      --chip-bg:#e3e6ec;
      --chip-bg-active:#1c324e;
      --chip-text:#1c324e;
      --chip-text-active:#ffffff;
      --main-display-bg:#fafafa;
    }
    body.theme-dark {
      --bg:#121417;
      --panel-bg:#1c2229;
      --panel-border:#2d3741;
      --text:#e6eaed;
      --text-soft:#b3bcc4;
      --accent:#4b7ec7;
      --accent-alt:#2c5a99;
      --chip-bg:#2a313a;
      --chip-bg-active:#4b7ec7;
      --chip-text:#d0d6dc;
      --chip-text-active:#ffffff;
      --main-display-bg:#202830;
    }
    body {
      margin:0;
      overflow: auto;
      font-family: 'Roboto', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      transition: background .4s, color .3s;
    }
  #authGate, #protectedContent { max-width:720px; padding:2rem 2.5rem; background:var(--panel-bg); border:1px solid var(--panel-border); border-radius:16px; box-shadow:0 4px 14px rgba(0,0,0,0.08); transition: background .4s, border-color .4s; }
  #authGate { margin:4rem auto; }
  #protectedContent { margin:4rem auto 4rem; }
    h1,h2 { font-weight:500; letter-spacing:.5px; margin-top:0; }
    form { display:flex; flex-wrap:wrap; gap:.75rem; align-items:center; }
    input[type=password] { flex:1 1 220px; padding:.75rem 1rem; font-size:1rem; border:1px solid #c7c7c7; border-radius:10px; background:#f9f9f9; }
    input[type=password]:focus { outline:2px solid var(--focus); outline-offset:2px; background:#fff; }
    button { padding:.8rem 1.4rem; font-size:1rem; font-weight:500; border:0; background:linear-gradient(135deg,#2c4d7f,#1c324e); color:#fff; border-radius:12px; cursor:pointer; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
    button:hover { filter:brightness(1.07); }
    button:active { transform:translateY(1px); }
    @media (max-width:560px){ #authGate, #protectedContent { margin:2rem 1rem; padding:1.5rem 1.25rem; } }
    /* Carousel / viewer styles */
    .logo-viewer { margin-top:2rem; }
  .logo-viewer .main-display { position:relative; display:flex; align-items:center; justify-content:center; background:var(--main-display-bg); border:1px solid var(--panel-border); border-radius:16px; padding:1.5rem; padding-bottom:6rem; min-height:280px; transition: background .4s, border-color .4s; }
  .logo-viewer .main-display .logo-title { position:absolute; bottom:3.5rem; left:0; right:0; text-align:center; font-size:3rem; font-weight:700; letter-spacing:4px; color:#333; pointer-events:none; font-family:inherit; }
  @media (max-width:560px){ .logo-viewer .main-display { padding-bottom:4.5rem; } .logo-viewer .main-display .logo-title { font-size:1.6rem; letter-spacing:3px; bottom:3rem; } }
    .logo-viewer .main-display img { max-width:100%; max-height:360px; width:auto; height:auto; object-fit:contain; transition:opacity .3s ease; }
    .logo-viewer .nav { position:absolute; top:50%; transform:translateY(-50%); background:rgba(0,0,0,0.45); color:#fff; border:0; width:42px; height:42px; border-radius:50%; cursor:pointer; display:flex; align-items:center; justify-content:center; font-size:1.3rem; backdrop-filter:blur(4px); }
    .logo-viewer .nav:hover { background:rgba(0,0,0,0.6); }
    .logo-viewer .nav.prev { left:12px; }
    .logo-viewer .nav.next { right:12px; }
  /* Background picker */
  .bg-picker { display:flex; flex-wrap:wrap; gap:.5rem; margin:1rem 0 .25rem; }
  .bg-picker-label { font-size:.8rem; font-weight:600; text-transform:uppercase; letter-spacing:.6px; color:#444; flex:1 0 100%; }
  .bg-btn { position:relative; border:2px solid transparent; padding:.55rem .85rem; border-radius:14px; cursor:pointer; font-size:.7rem; font-weight:600; letter-spacing:.5px; font-family:inherit; display:inline-flex; align-items:center; justify-content:center; background:#eee; color:#111; box-shadow:0 2px 4px rgba(0,0,0,0.08); transition:box-shadow .25s, transform .25s, border-color .25s, filter .25s; min-width:92px; }
  .bg-btn:hover { transform:translateY(-3px); box-shadow:0 4px 10px rgba(0,0,0,0.15); }
  .bg-btn.active { border-color:#1c324e; box-shadow:0 0 0 3px rgba(44,77,127,.35); }
  .bg-btn.dark { color:#fafafa; text-shadow:0 1px 2px rgba(0,0,0,0.6); }
  /* .bg-current removed per request */
  .picker-label { font-size:.65rem; font-weight:600; text-transform:uppercase; letter-spacing:.6px; color:#666; margin:1rem 0 .35rem; }
  @media (max-width:560px){ .bg-btn { font-size:.62rem; padding:.5rem .6rem; } }
  .filter-bar { display:flex; flex-wrap:wrap; gap:.5rem; margin-top:1.25rem; }
  .filter-chip { border:0; background:var(--chip-bg); color:var(--chip-text); padding:.55rem .95rem; border-radius:999px; cursor:pointer; font-size:.8rem; font-weight:500; letter-spacing:.5px; text-transform:uppercase; transition:background .25s, color .25s, box-shadow .25s; }
  .filter-chip:hover { filter:brightness(1.08); }
  .filter-chip.active { background:var(--chip-bg-active); color:var(--chip-text-active); box-shadow:0 2px 6px rgba(0,0,0,0.25); }
  /* Font picker */
  .font-buttons { display:flex; flex-wrap:wrap; gap:.5rem; margin:.5rem 0 0; }
  .font-btn { border:0; background:#e7e9ed; color:#1c324e; padding:.6rem .9rem; border-radius:10px; cursor:pointer; font-size:.8rem; line-height:1; font-weight:500; letter-spacing:.5px; transition:background .25s, box-shadow .25s, transform .25s; }
  .font-btn:hover { background:#d9dce2; }
  .font-btn.active { background:var(--chip-bg-active); color:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.25); }
  .font-btn:focus-visible { outline:3px solid var(--focus); outline-offset:2px; }
  /* Font color picker */
  .font-color-buttons { display:flex; flex-wrap:wrap; gap:.5rem; margin:.5rem 0 0; }
  .font-color-btn { position:relative; border:2px solid transparent; padding:.55rem .85rem; border-radius:14px; cursor:pointer; font-size:.65rem; font-weight:600; letter-spacing:.5px; font-family:inherit; display:inline-flex; align-items:center; justify-content:center; background:#eee; color:#111; box-shadow:0 2px 4px rgba(0,0,0,0.08); transition:box-shadow .25s, transform .25s, border-color .25s; min-width:88px; }
  .font-color-btn:hover { transform:translateY(-3px); box-shadow:0 4px 10px rgba(0,0,0,0.15); }
  .font-color-btn.active { border-color:var(--accent-alt); box-shadow:0 0 0 3px rgba(44,77,127,.35); }
  /* Theme toggle */
  .theme-toggle-btn { position:fixed; top:.75rem; right:.75rem; z-index:1200; background:var(--panel-bg); color:var(--text); border:1px solid var(--panel-border); padding:.55rem .9rem; border-radius:999px; font-size:.75rem; letter-spacing:.5px; font-weight:600; cursor:pointer; display:inline-flex; align-items:center; gap:.4rem; box-shadow:0 2px 6px rgba(0,0,0,0.25); backdrop-filter:blur(6px); transition:background .35s, color .35s, border-color .35s, transform .25s; }
  .theme-toggle-btn:hover { transform:translateY(-2px); }
  body.theme-dark .theme-toggle-btn { box-shadow:0 2px 10px rgba(0,0,0,0.5); }
  .font-color-btn.light-text { color:#fff; text-shadow:0 1px 2px rgba(0,0,0,0.55); }
  /* Disclaimer */
  .disclaimer { margin-top:3rem; font-size:.7rem; line-height:1.4; color:#666; text-align:center; border-top:1px solid #e2e2e2; padding-top:1.25rem; }
  .disclaimer strong { color:#444; }
  .thumb-strip { display:flex; gap:.5rem; overflow-x:auto; padding:.85rem .25rem .85rem .25rem; scrollbar-width:thin; margin-top:.35rem; }
    .thumb-strip::-webkit-scrollbar { height:8px; }
    .thumb-strip::-webkit-scrollbar-track { background:transparent; }
    .thumb-strip::-webkit-scrollbar-thumb { background:#c3c3c3; border-radius:4px; }
    .thumb { flex:0 0 auto; width:72px; height:72px; border:2px solid transparent; border-radius:12px; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.08); display:flex; align-items:center; justify-content:center; cursor:pointer; transition:border-color .25s, transform .25s; position:relative; }
    .thumb img { max-width:100%; max-height:100%; object-fit:contain; }
    .thumb:hover { transform:translateY(-3px); }
    .thumb.active { border-color:#1c324e; box-shadow:0 0 0 3px rgba(44,77,127,.25); }
    .thumb:focus-visible { outline:3px solid var(--focus); outline-offset:2px; }
    .logo-index-indicator { margin-top:.75rem; font-size:.9rem; color:#555; text-align:center; }
    .sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
  
    @media (max-width:560px){
      .logo-viewer .main-display { min-height:200px; padding:1rem; }
      .thumb { width:60px; height:60px; }
    }
  </style>
</head>
<body>
  <button id="themeToggle" class="theme-toggle-btn" type="button" aria-pressed="false" aria-label="Toggle dark mode">🌙 Dark</button>
  <div id="authGate">
    <h2>Enter Passcode</h2>
    <form id="passcodeForm" autocomplete="off">
      <input type="password" id="passcodeInput" placeholder="Passcode" aria-label="Passcode" required />
      <button type="submit">Unlock</button>
      <p id="errorMsg" style="color:#b00020;display:none;margin-top:0.5rem;">Incorrect passcode.</p>
    </form>
  </div>

  <div id="protectedContent" style="display:none;">
  <h1>Welcome to the ARASAN Logo Showcase</h1>
    <!-- Future protected logo content can go here -->
    <div id="logoViewer" class="logo-viewer" aria-live="polite" aria-label="ARASAN Logo Viewer">
      <div class="main-display">
        <button class="nav prev" type="button" aria-label="Previous logo" title="Previous">&#10094;</button>
        <img id="mainLogo" alt="Selected ARASAN Logo" src="" />
        <button class="nav next" type="button" aria-label="Next logo" title="Next">&#10095;</button>
  <div class="logo-title">ARASAN</div>
      </div>
  <!-- Removed background status line -->
  <div id="logoPickerLabel" class="picker-label">Logos</div>
  <div class="filter-bar" id="groupFilters" role="tablist" aria-labelledby="logoPickerLabel"></div>
  <div id="thumbStrip" class="thumb-strip" role="listbox" aria-labelledby="logoPickerLabel"></div>
  <div class="logo-index-indicator" id="logoIndexIndicator"></div>
  <div id="bgPickerLabel" class="picker-label" style="margin-top:1.25rem;">Background</div>
  <div class="bg-picker" id="bgPicker" role="toolbar" aria-labelledby="bgPickerLabel"></div>
  <div id="fontPickerLabel" class="picker-label">Font</div>
  <div id="fontPicker" class="font-buttons" role="toolbar" aria-labelledby="fontPickerLabel"></div>
  <div id="fontColorPickerLabel" class="picker-label">Font Color</div>
  <div id="fontColorPicker" class="font-color-buttons" role="toolbar" aria-labelledby="fontColorPickerLabel"></div>
    </div>
    <footer id="siteDisclaimer" class="disclaimer" aria-label="Copyright notice">
      <p>© <span id="yearNow"></span> <strong>Lakshmi</strong>. All ARASAN logos and related materials are proprietary and confidential. No copying, reproduction, distribution, display, or reuse in any form (digital or print) is permitted without prior written permission from Lakshmi. All rights reserved.</p>
    </footer>
  </div>

  <script>
    (function() {
  const PASSCODE = "ARASAN"; // Exact match required (comparison is case-insensitive)
      const form = document.getElementById('passcodeForm');
      const input = document.getElementById('passcodeInput');
      const error = document.getElementById('errorMsg');
      const gate = document.getElementById('authGate');
      const content = document.getElementById('protectedContent');
      const themeToggle = document.getElementById('themeToggle');

      // THEME: restore previous session selection
      try {
        const storedTheme = sessionStorage.getItem('theme');
        if (storedTheme === 'dark') {
          document.body.classList.add('theme-dark');
          themeToggle.setAttribute('aria-pressed','true');
          themeToggle.textContent = '☀️ Light';
          themeToggle.setAttribute('aria-label','Toggle light mode');
        }
      } catch(e) { /* ignore */ }

      function toggleTheme(){
        const dark = document.body.classList.toggle('theme-dark');
        if (dark){
          themeToggle.textContent = '☀️ Light';
          themeToggle.setAttribute('aria-label','Toggle light mode');
          themeToggle.setAttribute('aria-pressed','true');
        } else {
          themeToggle.textContent = '🌙 Dark';
          themeToggle.setAttribute('aria-label','Toggle dark mode');
          themeToggle.setAttribute('aria-pressed','false');
        }
        try { sessionStorage.setItem('theme', dark ? 'dark':'light'); } catch(e) {}
      }
      themeToggle.addEventListener('click', toggleTheme);

      // If previously unlocked in this session, skip prompt
      try {
        if (sessionStorage.getItem('unlocked') === '1') {
          gate.style.display = 'none';
          content.style.display = 'block';
        }
      } catch(e) { /* ignore storage errors */ }

      function initCarousel(){
        const grouped = {
          'a1': ['logos/a1/a11.png','logos/a1/a12.png','logos/a1/a13.png'],
          'a2': ['logos/a2/a21.png','logos/a2/a22.png','logos/a2/a23.png','logos/a2/a24.png','logos/a2/a25.png','logos/a2/a26.png','logos/a2/a27.png','logos/a2/a28.png'],
          'a3': ['logos/a3/a31.png','logos/a3/a32.png','logos/a3/a33.png','logos/a3/a34.png'],
          'a4': ['logos/a4/a41.png','logos/a4/a42.png','logos/a4/a43.png'],
          'a5': ['logos/a5/a51.png','logos/a5/a52.png','logos/a5/a53.png'],
          'a6': ['logos/a6/a61.png','logos/a6/a62.png','logos/a6/a63.png','logos/a6/a64.png','logos/a6/a65.png','logos/a6/a66.png']
        };
        const groupTitles = {
          a1: 'A-Frame',
          a2: 'Cats',
          a3: 'Lotus',
          a4: 'Elephant',
          a5: 'House',
          a6: 'Circle'
        };
        const order = Object.keys(grouped);
        const allLogos = order.flatMap(k=> grouped[k]);
        const mainImg = document.getElementById('mainLogo');
        const filterBar = document.getElementById('groupFilters');
        const thumbStrip = document.getElementById('thumbStrip');
        const indicator = document.getElementById('logoIndexIndicator');
        const prevBtn = document.querySelector('.logo-viewer .nav.prev');
        const nextBtn = document.querySelector('.logo-viewer .nav.next');
        let current = 0;
        let activeFilter = 'all'; // 'all' or group key
        let currentList = allLogos.slice();
        const bgPicker = document.getElementById('bgPicker');
        const mainDisplay = document.querySelector('.logo-viewer .main-display');

        const bgOptions = [
          {hex:'#FAF6E5', name:'Cream'},
          {hex:'#201F1B', name:'Matte Black'},
          {hex:'#1F2732', name:'Navy'},
          {hex:'#CDCBC5', name:'Charcoal'},
          {hex:'#393B3C', name:'Grey'},
          {hex:'#121210', name:'Black'},
          {hex:'#212A29', name:'Green'}
        ];

        function buildFilters(){
          const filters = [{key:'all', label:'All'}].concat(order.map(k=>({key:k,label:groupTitles[k]||k})));
          filters.forEach(f=>{
            const btn = document.createElement('button');
            btn.type='button';
            btn.className='filter-chip'+(f.key==='all' ? ' active':'');
            btn.setAttribute('role','tab');
            btn.setAttribute('aria-selected', f.key==='all' ? 'true':'false');
            btn.textContent = f.label;
            btn.addEventListener('click', ()=> activateFilter(f.key));
            filterBar.appendChild(btn);
          });
        }

        function activateFilter(key){
          if (activeFilter === key) return;
            activeFilter = key;
            [...filterBar.children].forEach(c=>{
              const k = c.textContent.toLowerCase();
              const isActive = (key==='all' && c.textContent==='All') || (groupTitles[key]===c.textContent);
              c.classList.toggle('active', isActive);
              c.setAttribute('aria-selected', isActive ? 'true':'false');
            });
            const previouslySelectedSrc = currentList[current];
            currentList = key==='all' ? allLogos.slice() : grouped[key].slice();
            rebuildThumbs();
            let newIndex = 0;
            if (previouslySelectedSrc){
              const idx = currentList.indexOf(previouslySelectedSrc);
              if (idx >=0) newIndex = idx;
            }
            select(newIndex);
        }

        function rebuildThumbs(){
          thumbStrip.innerHTML='';
          currentList.forEach((src, idx)=>{
            const btn = document.createElement('button');
            btn.type='button';
            btn.className='thumb';
            btn.setAttribute('role','option');
            const groupKey = order.find(g=> grouped[g].includes(src));
            btn.setAttribute('aria-label',`Logo ${idx+1} of ${currentList.length} (${groupTitles[groupKey]||groupKey})`);
            const img = document.createElement('img');
            img.src = src; img.alt = `${(groupTitles[groupKey]||groupKey)} logo ${idx+1}`;
            btn.appendChild(img);
            btn.addEventListener('click', ()=> select(idx));
            btn.addEventListener('keydown', (e)=> handleThumbKey(e, idx));
            thumbStrip.appendChild(btn);
          });
        }

        function handleThumbKey(e, idx){
          if (['ArrowRight','ArrowLeft','Home','End'].includes(e.key)) e.preventDefault();
          if (e.key==='ArrowRight') { select((idx+1)%currentList.length,true); focusThumb((idx+1)%currentList.length); }
          else if (e.key==='ArrowLeft') { select((idx-1+currentList.length)%currentList.length,true); focusThumb((idx-1+currentList.length)%currentList.length); }
          else if (e.key==='Home') { select(0,true); focusThumb(0); }
          else if (e.key==='End') { select(currentList.length-1,true); focusThumb(currentList.length-1); }
        }

        function updateIndicator(){
          const groupLabel = activeFilter==='all' ? 'All Groups' : (groupTitles[activeFilter]||activeFilter);
          indicator.textContent = `Showing ${current+1} of ${currentList.length} (${groupLabel})`;
        }

        function select(idx){
          current = idx;
          mainImg.style.opacity = 0;
          requestAnimationFrame(()=>{
            mainImg.src = currentList[idx];
            mainImg.onload = ()=> { mainImg.style.opacity = 1; };
          });
          [...thumbStrip.children].forEach((c,i)=> c.classList.toggle('active', i===idx));
          updateIndicator();
          ensureVisible(idx);
        }

        function ensureVisible(idx){
          const el = thumbStrip.children[idx];
          if (!el) return;
          const rect = el.getBoundingClientRect();
          const parentRect = thumbStrip.getBoundingClientRect();
          if (rect.left < parentRect.left) thumbStrip.scrollBy({left: rect.left - parentRect.left - 8, behavior:'smooth'});
          else if (rect.right > parentRect.right) thumbStrip.scrollBy({left: rect.right - parentRect.right + 8, behavior:'smooth'});
        }

        function focusThumb(idx){
          const el = thumbStrip.children[idx];
          if (el) el.focus({preventScroll:true});
        }

        prevBtn.addEventListener('click', ()=> select((current-1+currentList.length)%currentList.length));
        nextBtn.addEventListener('click', ()=> select((current+1)%currentList.length));
        document.addEventListener('keydown', (e)=>{
          if (content.style.display !== 'block') return;
          if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) return;
          if (e.key==='ArrowLeft') select((current-1+currentList.length)%currentList.length);
          else if (e.key==='ArrowRight') select((current+1)%currentList.length);
        });

        function luminance(hex){
          const c = hex.replace('#','');
          const r = parseInt(c.slice(0,2),16)/255;
          const g = parseInt(c.slice(2,4),16)/255;
          const b = parseInt(c.slice(4,6),16)/255;
          const a=[r,g,b].map(v=> v<=0.03928? v/12.92: Math.pow((v+0.055)/1.055,2.4));
          return 0.2126*a[0]+0.7152*a[1]+0.0722*a[2];
        }

        function applyBackground(opt){
          mainDisplay.style.background = opt.hex;
          const dark = luminance(opt.hex) < 0.4;
          mainDisplay.style.borderColor = dark ? 'rgba(255,255,255,0.35)' : '#ddd';
        }

        function contrastText(hex){
          // WCAG relative luminance based contrast against both black and white
          const L = luminance(hex);
          const contrastBlack = (L + 0.05) / 0.05;
          const contrastWhite = 1.05 / (L + 0.05);
          return contrastWhite >= contrastBlack ? '#ffffff' : '#111111';
        }

        function buildBgPicker(){
          bgPicker.innerHTML='';
          bgOptions.forEach((opt, idx)=>{
            const btn = document.createElement('button');
            btn.type='button';
            btn.className='bg-btn'+(idx===0?' active':'');
            btn.style.background = opt.hex;
            const txt = contrastText(opt.hex);
            btn.style.color = txt;
            if (txt === '#ffffff') btn.style.textShadow = '0 1px 2px rgba(0,0,0,0.55)';
            btn.setAttribute('aria-label', `${opt.name} background ${opt.hex}`);
            btn.dataset.hex = opt.hex;
            btn.dataset.name = opt.name;
            btn.textContent = opt.name;
            btn.addEventListener('click', ()=>{
              [...bgPicker.children].forEach(c=>c.classList.remove('active'));
              btn.classList.add('active');
              applyBackground(opt);
            });
            bgPicker.appendChild(btn);
            if (idx===0) applyBackground(opt);
          });
        }

        buildFilters();
        rebuildThumbs();
        select(0);
  buildBgPicker();
        // Font picker
        const fontPicker = document.getElementById('fontPicker');
        const logoTitle = document.querySelector('.logo-title');
        const fonts = [
          {label:'Cinzel', family:"'Cinzel', serif"},
            {label:'Bodoni Moda', family:"'Bodoni Moda', serif"},
            {label:'Jost', family:"'Jost', sans-serif"},
            {label:'Manrope', family:"'Manrope', sans-serif"},
            {label:'Cormorant Garamond', family:"'Cormorant Garamond', serif"}
        ];
        function buildFontButtons(){
          fontPicker.innerHTML='';
          fonts.forEach((f, idx)=>{
            const btn = document.createElement('button');
            btn.type='button';
            btn.className='font-btn'+(idx===0?' active':'');
            btn.textContent = f.label;
            btn.style.fontFamily = f.family;
            btn.setAttribute('aria-label', `${f.label} font`);
            btn.setAttribute('aria-pressed', idx===0 ? 'true':'false');
            btn.addEventListener('click', ()=>{
              [...fontPicker.children].forEach(c=>{ c.classList.remove('active'); c.setAttribute('aria-pressed','false'); });
              btn.classList.add('active');
              btn.setAttribute('aria-pressed','true');
              logoTitle.style.fontFamily = f.family;
            });
            fontPicker.appendChild(btn);
            if (idx===0) logoTitle.style.fontFamily = f.family;
          });
        }
        buildFontButtons();

        // Font color picker
        const fontColorPicker = document.getElementById('fontColorPicker');
        const fontColors = [
          {name:'Gold', hex:'#B7852A'},
          {name:'Rose Gold', hex:'#E3AB87'},
          {name:'Black', hex:'#1D1E1B'},
          {name:'Green', hex:'#1A3F30'},
          {name:'Cream', hex:'#F8F1DE'},
          {name:'Grey', hex:'#5A5750'}
        ];
        function buildFontColorButtons(){
          fontColorPicker.innerHTML='';
          fontColors.forEach((c, idx)=>{
            const btn = document.createElement('button');
            btn.type='button';
            btn.className='font-color-btn'+(idx===0?' active':'');
            btn.style.background = c.hex;
            // Determine readable label color vs button background for button text itself
            const L = luminance(c.hex);
            const contrastWhite = 1.05 / (L + 0.05);
            const contrastBlack = (L + 0.05) / 0.05;
            const labelColor = contrastWhite >= contrastBlack ? '#ffffff' : '#111111';
            btn.style.color = labelColor;
            if (labelColor === '#ffffff') btn.classList.add('light-text');
            btn.textContent = c.name;
            btn.setAttribute('aria-label', `${c.name} font color ${c.hex}`);
            btn.addEventListener('click', ()=>{
              [...fontColorPicker.children].forEach(el=>el.classList.remove('active'));
              btn.classList.add('active');
              logoTitle.style.color = c.hex;
              // Optional: add subtle text-shadow if light color on light bg
              const bgColor = getComputedStyle(mainDisplay).backgroundColor;
              // Simple heuristic: if chosen color luminance > .75 and background luminance > .75 add shadow
              function parseRGB(rgb){ const m=rgb.match(/rgba?\(([^)]+)\)/); if(!m) return [255,255,255]; return m[1].split(',').slice(0,3).map(s=>parseInt(s.trim(),10)); }
              const [br,bg,bk] = parseRGB(bgColor);
              const bgLum = luminance('#'+[br,bg,bk].map(v=> v.toString(16).padStart(2,'0')).join(''));
              if (L > 0.75 && bgLum > 0.75) {
                logoTitle.style.textShadow = '0 1px 2px rgba(0,0,0,0.45)';
              } else if (L < 0.2 && bgLum < 0.25) {
                logoTitle.style.textShadow = '0 1px 2px rgba(255,255,255,0.35)';
              } else {
                logoTitle.style.textShadow = 'none';
              }
            });
            fontColorPicker.appendChild(btn);
            if (idx===0) {
              logoTitle.style.color = c.hex;
            }
          });
        }
        buildFontColorButtons();
      }

      form.addEventListener('submit', function(e){
        e.preventDefault();
        const val = (input.value || '').trim();
  if (val.toUpperCase() === PASSCODE) { // case-insensitive match
          gate.style.display = 'none';
          content.style.display = 'block';
          error.style.display = 'none';
          try { sessionStorage.setItem('unlocked','1'); } catch(e) {}
          initCarousel();
        } else {
          error.style.display = 'block';
          input.select();
        }
      });

      // Initialize carousel if already unlocked (e.g., page refresh in session)
      if (content.style.display === 'block') {
        initCarousel();
      }
  // Set dynamic year for disclaimer
  const yEl = document.getElementById('yearNow');
  if (yEl) yEl.textContent = new Date().getFullYear();
    })();
  </script>
</body>
</html>